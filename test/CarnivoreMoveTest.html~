<html>
<head>

<script type="text/javascript" src="../bin/Vector.js"></script>
<script type="text/javascript" src="../bin/Position.js"></script>
<script type="text/javascript" src="../bin/Velocity.js"></script>

<script type="text/javascript" src="../bin/State.js"></script>

<script type="text/javascript" src="../bin/LivingThing.js"></script>
<script type="text/javascript" src="../bin/Animal.js"></script>
<script type="text/javascript" src="../bin/Carnivore.js"></script>

<script type="text/javascript" >

var canvas;
var ctx;

function main() {
    //prln("no parse errer");

    canvas = document.getElementById( 'test' );
    if ( ! canvas || ! canvas.getContext ) { return false; }
    ctx = canvas.getContext( '2d' );

    var liv = new Carnivore( new Position( 50, 50 ), 100);

    //prln("die test");
    //prln("set energy 100");
    liv.setEnergy( 600 );
    //prln(liv.die());
    //prln("set energy 0 ");
    //liv.setEnergy(0);
    //prln(liv.die());

    //prln("print test");
    liv.print();ln();
    liv.draw();
    //var tem = liv.birth();
    //tem.print();

    var ary = makeTestData();
    printAll(ary);
    prln(liv.funclojure());ln();
    var tem = liv.funclojure();
    prln(tem(ary[0]));
    var res = liv.findTargets( ary, liv.funclojure() );
    printAll( res );

    prln("find test");
    printAll( res );
    prln("looking carb");
    liv.print();prln("sight "+liv.sightLength);
    prln("before change");
    liv.getVelocity().print();
    prln(" "+liv.getVelocity().getLength());
    liv.changeVelocityToClosest( ary );
    prln("after change");
    liv.getVelocity().print();
    prln(" "+liv.getVelocity().getLength());
}

function roundRandom() { return Math.round( Math.random() * 100 ); }
function makeTestData() {
    var ary = new Array(10);
    for (var i = 0; i < ary.length; i++) {
        ary[i] = new LivingThing( new Position( roundRandom(), roundRandom() ) );
    }
    return ary;
}


function printAll( liv_ary ) {
    for (var i = 0; i < liv_ary.length; i++) {
        liv_ary[i].print();
        ln();
    }
}

function prln( str ) { document.write( str );ln(); }
function ln() { document.write("<br>"); }
function hoge() { document.write("hoge");ln(); }
</script>
</head>

<body>
<h1>Carnivore Test</h1>
<canvas id="test" width="100" height="100"></canvas>
<form>
<input type="button" value="carniovre         test           !!!!!!!!!!!!!!!!!!!!!!!" onclick="main()">
</form>
</body>

</html>
